<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Portal - Library Management System</title>

    <!-- Tailwind CSS v4 via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts - Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">

    <!-- API Service -->
    <script src="js/api-service.js" defer></script>
</head>
<body class="bg-blue-50 min-h-screen font-[Poppins]">
    <!-- Direct inline script to handle clicks -->
    <script src="js/ui-controller.js" defer></script>

    <!-- QCULib Header -->
    <header class="bg-[#004e98] z-10">
        <!-- Top section with logo and search -->
        <div class="container mx-auto flex items-center justify-between py-3 px-4">
            <!-- Logo with exact spacing -->
            <div class="flex items-center gap-2">
                <img src="assets/logo.png" alt="QCULib Logo" class="h-9">
                <span class="font-bold text-xl text-white ml-1">QCULib</span>
            </div>

            <!-- Search Bar with exact padding/margin from image -->
            <div class="flex-1 max-w-md mx-8">
                <div class="relative w-full">
                    <input type="text" placeholder="Search books, authors, subjects..." 
                           class="w-full py-2 px-4 rounded-full text-gray-800 border-0 focus:outline-none">
                    <button class="absolute right-0 top-0 h-full px-4 bg-[#ff5252] text-white rounded-r-full hover:bg-red-600 transition-all duration-200 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Login Button with exact styling from image -->
            <button id="login-button" class="bg-[#ff5252] text-white py-1.5 px-5 rounded-full hover:bg-red-600 transition-all duration-200 flex items-center">
                <span class="font-medium mr-1">Login</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                </svg>
            </button>
        </div>

        <!-- Navigation Bar with exactly matching styling -->
        <nav class="bg-[#004e98] border-t border-[rgba(255,255,255,0.1)]">
            <div class="container mx-auto">
                <div class="flex">
                    <a href="#" class="text-white py-3 px-5 hover:bg-[rgba(255,255,255,0.1)] transition-all duration-200 font-medium">Home</a>
                    <a href="#" class="text-white py-3 px-5 hover:bg-[rgba(255,255,255,0.1)] transition-all duration-200 font-medium">Catalog</a>
                    <a href="#" class="text-white py-3 px-5 hover:bg-[rgba(255,255,255,0.1)] transition-all duration-200 font-medium">Services</a>
                    <a href="#" class="text-white py-3 px-5 hover:bg-[rgba(255,255,255,0.1)] transition-all duration-200 font-medium">Branches</a>
                    <a href="#" class="text-white py-3 px-5 hover:bg-[rgba(255,255,255,0.1)] transition-all duration-200 font-medium">About Us</a>
                    <a href="#" class="text-white py-3 px-5 hover:bg-[rgba(255,255,255,0.1)] transition-all duration-200 font-medium">FAQ</a>
                </div>
            </div>
        </nav>
    </header>

    <div class="flex flex-col md:flex-row">
        <!-- Collapsible Sidebar Navigation -->
        <aside id="sidebar" class="h-full bg-white shadow-lg z-30 transition-all duration-300 w-64 sidebar-expanded rounded-r-xl">
            <div class="p-4 relative z-40 overflow-hidden">
                <!-- Sidebar Header Layout -->
                <div class="flex items-center justify-between">
                    <!-- Logo and Title in a row - EXPANDED STATE -->
                    <div class="sidebar-content sidebar-expanded-view flex items-center">
                        <!-- QCU Logo -->
                        <div class="sidebar-logo flex items-center justify-center text-blue-800 mr-3">
                            <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                <span class="font-bold text-sm">QCU</span>
                            </div>
                        </div>

                        <!-- Title Text -->
                        <div class="sidebar-text">
                            <h2 class="text-base font-bold text-blue-800">Student Portal</h2>
                        </div>
                    </div>

                    <!-- Logo for COLLAPSED STATE -->
                    <div class="sidebar-collapsed-view hidden">
                        <!-- QCU Logo -->
                        <div class="sidebar-logo flex items-center justify-center text-blue-800">
                            <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                <span class="font-bold text-sm">QCU</span>
                            </div>
                        </div>
                    </div>

                    <!-- Toggle Button without tooltip -->
                    <button id="sidebar-toggle" class="w-6 h-6 bg-transparent flex items-center justify-center transition-all duration-300" onclick="toggleSidebar()">
                        <img src="assets/sidebar-toggle.svg" class="sidebar-icon" alt="Toggle sidebar">
                    </button>
                </div>
            </div>

            <nav class="p-2 flex flex-col h-full overflow-hidden">
                <ul class="space-y-2">
                    <li>
                        <button id="tab-profile" class="tab-btn active w-full flex items-center px-3 py-2 text-left rounded-lg font-medium text-sm text-blue-600 bg-blue-50 border-l-4 border-blue-500" onclick="switchTab('profile')">
                            <i class="fas fa-user w-5 text-center"></i>
                            <span class="ml-3 sidebar-text opacity-100 whitespace-nowrap">Profile</span>
                        </button>
                    </li>
                    <li>
                        <div class="accordion-item">
                            <button id="books-accordion-btn" class="accordion-header w-full flex items-center justify-between px-3 py-2 text-left rounded-lg font-medium text-sm text-gray-600 hover:bg-gray-100 border-l-4 border-transparent">
                                <div class="flex items-center">
                                    <i class="fas fa-book w-5 text-center"></i>
                                    <span class="ml-3 sidebar-text opacity-100 whitespace-nowrap">Books</span>
                                </div>
                                <i class="fas fa-chevron-down text-xs transition-transform duration-300 sidebar-text opacity-100"></i>
                            </button>
                            <div class="accordion-content hidden pl-8 pr-3 py-1 space-y-1">
                                <button id="tab-physical-books" class="w-full flex items-center px-3 py-2 text-left rounded-lg font-medium text-sm text-gray-600 hover:bg-gray-100" onclick="switchTab('books', 'physical')">
                                    <i class="fas fa-book-open w-5 text-center"></i>
                                    <span class="ml-2 sidebar-text opacity-100 whitespace-nowrap">Physical Books</span>
                                    <span class="ml-auto bg-blue-500 text-white text-xs px-2 py-1 rounded-full sidebar-text opacity-100">2</span>
                                </button>
                                <button id="tab-ebooks" class="w-full flex items-center px-3 py-2 text-left rounded-lg font-medium text-sm text-gray-600 hover:bg-gray-100" onclick="switchTab('books', 'ebook')">
                                    <i class="fas fa-tablet-alt w-5 text-center"></i>
                                    <span class="ml-2 sidebar-text opacity-100 whitespace-nowrap">E-Books</span>
                                </button>
                            </div>
                        </div>
                    </li>
                    <li>
                        <button id="tab-rooms" class="tab-btn w-full flex items-center px-3 py-2 text-left rounded-lg font-medium text-sm text-gray-600 hover:bg-gray-100 border-l-4 border-transparent" onclick="switchTab('rooms')">
                            <i class="fas fa-users w-5 text-center"></i>
                            <span class="ml-3 sidebar-text opacity-100 whitespace-nowrap">Meeting Rooms</span>
                        </button>
                    </li>
                    <li>
                        <div class="accordion-item">
                            <button id="equipment-accordion-btn" class="accordion-header w-full flex items-center justify-between px-3 py-2 text-left rounded-lg font-medium text-sm text-gray-600 hover:bg-gray-100 border-l-4 border-transparent">
                                <div class="flex items-center">
                                    <i class="fas fa-laptop w-5 text-center"></i>
                                    <span class="ml-3 sidebar-text opacity-100 whitespace-nowrap">Equipment</span>
                                </div>
                                <i class="fas fa-chevron-down text-xs transition-transform duration-300 sidebar-text opacity-100"></i>
                            </button>
                            <div class="accordion-content hidden pl-8 pr-3 py-1 space-y-1">
                                <button id="tab-my-equipment" class="w-full flex items-center px-3 py-2 text-left rounded-lg font-medium text-sm text-gray-600 hover:bg-gray-100" onclick="switchTab('equipment', 'borrowed')">
                                    <i class="fas fa-toolbox w-5 text-center"></i>
                                    <span class="ml-2 sidebar-text opacity-100 whitespace-nowrap">My Equipment</span>
                                    <span class="ml-auto bg-blue-500 text-white text-xs px-2 py-1 rounded-full sidebar-text opacity-100">2</span>
                                </button>
                                <button id="tab-borrow-equipment" class="w-full flex items-center px-3 py-2 text-left rounded-lg font-medium text-sm text-gray-600 hover:bg-gray-100" onclick="switchTab('equipment', 'borrow')">
                                    <i class="fas fa-laptop-code w-5 text-center"></i>
                                    <span class="ml-2 sidebar-text opacity-100 whitespace-nowrap">Borrow Equipment</span>
                                </button>
                            </div>
                        </div>
                    </li>
                    <li>
                        <button id="tab-notifications" class="tab-btn w-full flex items-center px-3 py-2 text-left rounded-lg font-medium text-sm text-gray-600 hover:bg-gray-100 border-l-4 border-transparent" onclick="switchTab('notifications')">
                            <i class="fas fa-bell w-5 text-center"></i>
                            <span class="ml-3 sidebar-text opacity-100 whitespace-nowrap">Notifications</span>
                            <span class="ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full sidebar-text opacity-100">2</span>
                        </button>
                    </li>
                </ul>

                <!-- Quick Links and Logout at Bottom -->
                <div class="mt-5 pt-4 border-t border-gray-200">
                    <h3 class="text-xs uppercase text-gray-500 font-semibold mb-2 px-3 sidebar-text opacity-100 whitespace-nowrap">Quick Links</h3>
                    <ul class="space-y-1">
                        <li>
                            <button id="library-hours-btn" class="w-full flex items-center px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg" onclick="showLibraryHours()">
                                <i class="fas fa-calendar-alt w-5 text-center"></i>
                                <span class="ml-3 sidebar-text opacity-100 whitespace-nowrap">Library Hours</span>
                            </button>
                        </li>
                        <li>
                            <button id="help-center-btn" class="w-full flex items-center px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg" onclick="showHelpCenter()">
                                <i class="fas fa-question-circle w-5 text-center"></i>
                                <span class="ml-3 sidebar-text opacity-100 whitespace-nowrap">Help Center</span>
                            </button>
                        </li>
                        <li class="mt-2">
                            <button id="logout-btn" class="w-full flex items-center px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg">
                                <i class="fas fa-sign-out-alt w-5 text-center"></i>
                                <span class="ml-3 sidebar-text opacity-100 whitespace-nowrap">Logout</span>
                            </button>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 mx-auto p-4 md:p-6 transition-all duration-300">
            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Student Profile Section -->
                <section id="profile-content" class="tab-pane active">
                    <div class="bg-white p-6 rounded-xl shadow-sm mb-6">
                        <h2 class="text-xl font-semibold text-blue-700 mb-4">Student Profile</h2>
                        <div id="student-profile" class="space-y-3">
                            <!-- Profile content will be loaded here via JavaScript -->
                        </div>
                    </div>
                </section>

                <!-- Borrowed Books Section -->
                <section id="books-content" class="tab-pane hidden">
                    <div class="bg-white p-6 rounded-xl shadow-sm mb-6">
                        <div class="mb-6">
                            <div class="flex flex-col sm:flex-row justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold text-blue-700">Borrowed Books</h2>
                                <div class="flex flex-col sm:flex-row gap-2 mt-2 sm:mt-0">
                                    <select id="book-filter" class="bg-white rounded px-3 py-1 text-sm border border-gray-300">
                                        <option value="all">All Physical Books</option>
                                        <option value="borrowed" selected>Currently Borrowed</option>
                                        <option value="returned">Returned</option>
                                        <option value="overdue">Overdue</option>
                                    </select>
                                    <select id="book-sort" class="bg-white rounded px-3 py-1 text-sm border border-gray-300">
                                        <option value="due-date">Sort by Due Date</option>
                                        <option value="title">Sort by Title</option>
                                        <option value="branch">Sort by Branch</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div id="borrowed-books" class="space-y-4">
                            <!-- Books will be loaded here via JavaScript -->
                        </div>
                    </div>
                </section>

                <!-- Meeting Room Reservation Section -->
                <section id="rooms-content" class="tab-pane hidden">
                    <div class="bg-white p-6 rounded-xl shadow-sm mb-6">
                        <h2 class="text-xl font-semibold text-blue-700 mb-4">Meeting Room Reservation</h2>
                        <p class="text-sm text-gray-600 mb-4">Reserve a meeting room for your group (5-10 people)</p>

                        <!-- Terms and Conditions First -->
                        <div id="room-terms-container" class="p-5 bg-blue-50 rounded-lg border border-blue-200 mb-6">
                            <h3 class="text-lg font-semibold text-blue-800 mb-4 flex items-center">
                                <i class="fas fa-file-contract mr-2"></i>
                                Terms and Conditions
                            </h3>

                            <div class="space-y-4 text-sm text-gray-700">
                                <p class="font-medium">Please read the following terms and conditions carefully before reserving a meeting room:</p>

                                <ol class="list-decimal pl-5 space-y-2">
                                    <li>Meeting rooms are available for groups of 5-10 students only.</li>
                                    <li>Reservations can be made up to 2 weeks in advance.</li>
                                    <li>Each reservation is for a maximum of 1 hour.</li>
                                    <li>The primary student making the reservation must be present during the entire reservation period.</li>
                                    <li>Food and drinks are not allowed in the meeting rooms, except for bottled water.</li>
                                    <li>The room must be left in the same condition as it was found.</li>
                                    <li>Noise levels must be kept to a minimum to avoid disturbing others.</li>
                                    <li>Cancellations must be made at least 24 hours in advance.</li>
                                    <li>No-shows may result in suspension of reservation privileges.</li>
                                    <li>The library reserves the right to cancel reservations if needed for official purposes.</li>
                                </ol>

                                <div class="flex items-start mt-4">
                                    <input id="room-terms-agreement-initial" name="room-terms-agreement-initial" type="checkbox" class="mt-1 mr-2" required>
                                    <label for="room-terms-agreement-initial" class="text-sm text-gray-700">
                                        I have read and agree to the terms and conditions for reserving a meeting room. <span class="text-red-500">*</span>
                                    </label>
                                </div>

                                <div class="text-center mt-6">
                                    <button type="button" id="continue-to-room-form" class="bg-blue-600 text-white py-2 px-8 rounded-lg hover:bg-blue-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed">
                                        Proceed
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Room Reservation Form (Hidden Initially) -->
                        <div id="room-reservation-content" class="hidden">
                            <!-- Date Selection -->
                            <div class="mb-6">
                                <label for="reservation-date" class="block text-sm font-medium text-gray-700 mb-1">Select Date</label>
                                <div class="flex flex-wrap gap-2">
                                    <!-- Date buttons will be generated by JavaScript -->
                                    <div id="date-buttons" class="flex flex-wrap gap-2"></div>
                                </div>
                            </div>

                            <!-- Time Slots Table -->
                            <div class="mb-6">
                                <h3 class="text-sm font-medium text-gray-700 mb-2">Available Time Slots</h3>
                                <div id="time-slots-container" class="mt-3">
                                    <!-- Time slots will be loaded here via JavaScript -->
                                </div>
                            </div>

                            <!-- Reserve Button -->
                            <div class="text-center">
                                <button id="reserve-room-btn" class="bg-gray-400 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                                    Reserve Meeting Room
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Tech Resource Center Section -->
                <section id="equipment-content" class="tab-pane hidden">
                    <!-- My Equipment Section (Shown when 'My Equipment' is selected) -->
                    <div id="my-equipment-content" class="bg-white p-6 rounded-xl shadow-sm mb-6">
                        <div class="mb-6">
                            <div class="flex flex-col sm:flex-row justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold text-blue-700">My Equipment</h2>
                                <div class="flex flex-col sm:flex-row gap-2 mt-2 sm:mt-0">
                                    <select id="equipment-filter" class="bg-white rounded px-3 py-1 text-sm border border-gray-300">
                                        <option value="all">All Equipment</option>
                                        <option value="borrowed" selected>Currently Borrowed</option>
                                        <option value="returned">Returned</option>
                                    </select>
                                    <select id="equipment-sort" class="bg-white rounded px-3 py-1 text-sm border border-gray-300">
                                        <option value="due-date">Sort by Due Date</option>
                                        <option value="type">Sort by Type</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div id="borrowed-equipment-list" class="space-y-4">
                            <!-- Borrowed equipment will be loaded here via JavaScript -->
                            <div class="text-center py-4 text-gray-500">
                                <i class="fas fa-spinner fa-spin text-blue-500 text-2xl mb-2"></i>
                                <p>Loading your equipment...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Borrow Equipment Section (Shown when 'Borrow Equipment' is selected) -->
                    <div id="borrow-equipment-content" class="bg-white p-6 rounded-xl shadow-sm mb-6 hidden">
                        <h2 class="text-xl font-semibold text-blue-700 mb-4">Borrow Equipment</h2>
                        <p class="text-sm text-gray-600 mb-4">Request technology resources to support your academic success</p>

                        <!-- Terms and Conditions First -->
                        <div id="equipment-terms-container" class="p-5 bg-blue-50 rounded-lg border border-blue-200 mb-6">
                            <h3 class="text-lg font-semibold text-blue-800 mb-4 flex items-center">
                                <i class="fas fa-file-contract mr-2"></i>
                                Terms and Conditions
                            </h3>

                            <div class="space-y-4 text-sm text-gray-700">
                                <p class="font-medium">Please read the following terms and conditions carefully before borrowing equipment:</p>

                                <ol class="list-decimal pl-5 space-y-2">
                                    <li>Students must present a valid student ID to borrow equipment.</li>
                                    <li>Equipment must be returned in the same condition as when it was borrowed.</li>
                                    <li>Late returns will incur a fee of â‚±10 per day.</li>
                                    <li>Students are responsible for any damage or loss of equipment.</li>
                                    <li>Replacement costs will be charged for damaged or lost equipment.</li>
                                    <li>Equipment cannot be transferred to another student.</li>
                                    <li>The library reserves the right to recall equipment at any time if needed.</li>
                                    <li>Maximum borrowing period is 7 days.</li>
                                    <li>Students can borrow a maximum of two items at a time.</li>
                                    <li>Violation of these terms may result in suspension of borrowing privileges.</li>
                                </ol>

                                <div class="flex items-start mt-4">
                                    <input id="terms-agreement-initial" name="terms-agreement-initial" type="checkbox" class="mt-1 mr-2" required>
                                    <label for="terms-agreement-initial" class="text-sm text-gray-700">
                                        I have read and agree to the terms and conditions for borrowing equipment. <span class="text-red-500">*</span>
                                    </label>
                                </div>

                                <div class="text-center mt-6">
                                    <button type="button" id="continue-to-form" class="bg-blue-600 text-white py-2 px-8 rounded-lg hover:bg-blue-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed">
                                        Proceed
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Equipment Borrowing Form (Hidden Initially) -->
                        <form id="equipment-form" class="space-y-6 hidden">
                            <!-- Equipment Selection Section -->
                            <div class="p-4 bg-white rounded-lg border border-gray-200">
                                <h3 class="text-md font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-laptop-code mr-2"></i>
                                    Equipment Selection
                                </h3>
                                <div class="space-y-3">
                                    <!-- Equipment Type Dropdown -->
                                    <div>
                                        <label for="equipment-type" class="block text-sm font-medium text-gray-700 mb-1">Select Equipment <span class="text-red-500">*</span></label>
                                        <select id="equipment-type" name="equipment-type" class="w-full p-2 border border-gray-300 rounded-lg" required>
                                            <option value="">-- Select an equipment --</option>
                                            <option value="dell">Dell Laptop</option>
                                            <option value="mouse">Mouse</option>
                                            <option value="laptop-bag">Laptop Bag</option>
                                            <option value="pocket-wifi">Pocket Wifi</option>
                                        </select>
                                        <p class="text-xs text-gray-500 mt-1">Available equipment may vary by campus location</p>
                                    </div>

                                    <!-- Selected Equipment Preview -->
                                    <div id="selected-equipment-preview" class="hidden mt-3 p-3 bg-white rounded-lg border border-gray-200">
                                        <div class="flex items-center">
                                            <i id="equipment-icon" class="fas fa-laptop text-blue-500 text-xl mr-3"></i>
                                            <div>
                                                <p id="equipment-name" class="font-medium">No equipment selected</p>
                                                <p id="equipment-status" class="text-xs text-gray-500">Select an equipment to see availability</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Borrowing Details Section -->
                            <div class="p-4 bg-white rounded-lg border border-gray-200">
                                <h3 class="text-md font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-calendar-alt mr-2"></i>
                                    Borrowing Details
                                </h3>
                                <div class="space-y-3">
                                    <!-- Duration -->
                                    <div>
                                        <label for="borrow-duration" class="block text-sm font-medium text-gray-700 mb-1">Duration (Days) <span class="text-red-500">*</span></label>
                                        <select id="borrow-duration" name="borrow-duration" class="w-full p-2 border border-gray-300 rounded-lg" required>
                                            <option value="">-- Select duration --</option>
                                            <option value="1">1 Day</option>
                                            <option value="2">2 Days</option>
                                            <option value="3">3 Days</option>
                                            <option value="4">4 Days</option>
                                            <option value="5">5 Days</option>
                                            <option value="6">6 Days</option>
                                            <option value="7">7 Days (Maximum)</option>
                                        </select>
                                        <p class="text-xs text-gray-500 mt-1">Maximum borrowing period is 7 days</p>
                                    </div>

                                    <!-- Purpose -->
                                    <div>
                                        <label for="borrow-purpose" class="block text-sm font-medium text-gray-700 mb-1">Purpose <span class="text-red-500">*</span></label>
                                        <select id="borrow-purpose" name="borrow-purpose" class="w-full p-2 border border-gray-300 rounded-lg" required>
                                            <option value="">-- Select purpose --</option>
                                            <option value="classwork">Class Work</option>
                                            <option value="research">Research Project</option>
                                            <option value="presentation">Presentation</option>
                                            <option value="event">Campus Event</option>
                                            <option value="other">Other (Specify)</option>
                                        </select>
                                    </div>

                                    <!-- Other Purpose (Conditional) -->
                                    <div id="other-purpose-container" class="hidden">
                                        <label for="other-purpose" class="block text-sm font-medium text-gray-700 mb-1">Specify Purpose <span class="text-red-500">*</span></label>
                                        <input type="text" id="other-purpose" name="other-purpose" class="w-full p-2 border border-gray-300 rounded-lg" placeholder="Please specify your purpose">
                                    </div>

                                    <!-- Return Date/Time (Calculated) -->
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Return By</label>
                                        <div id="return-time" class="p-3 bg-white border border-gray-300 rounded-lg text-gray-700">
                                            Select duration to calculate return time
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Final Confirmation Section -->
                            <div class="p-4 bg-gray-50 rounded-lg border border-gray-200">
                                <h3 class="text-md font-semibold text-gray-800 mb-3 flex items-center">
                                    <i class="fas fa-file-signature mr-2"></i>
                                    Confirmation
                                </h3>

                                <!-- Terms Agreement -->
                                <div class="flex items-start mb-4">
                                    <input id="terms-agreement" name="terms-agreement" type="checkbox" class="mt-1 mr-2" required>
                                    <label for="terms-agreement" class="text-sm text-gray-600">
                                        I confirm that all information is correct and I agree to return the equipment in the same condition by the specified date. <span class="text-red-500">*</span>
                                    </label>
                                </div>

                                <!-- Form Error Message -->
                                <div id="form-error" class="hidden mb-4 p-3 bg-red-50 text-red-700 rounded-lg border border-red-200 text-sm">
                                    Please fill in all required fields and accept the terms.
                                </div>

                                <!-- Submit and Reset Buttons -->
                                <div class="flex flex-col sm:flex-row gap-3 justify-center">
                                    <button type="submit" id="submit-equipment-form" class="bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed">
                                        Submit Request
                                    </button>
                                    <button type="reset" id="reset-equipment-form" class="bg-gray-200 text-gray-700 py-2 px-6 rounded-lg hover:bg-gray-300 transition">
                                        Reset Form
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </section>

                <!-- Notifications Section -->
                <section id="notifications-content" class="tab-pane hidden">
                    <div class="bg-white p-6 rounded-xl shadow-sm mb-6">
                        <div class="mb-6">
                            <div class="flex flex-col sm:flex-row justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold text-blue-700">Notifications</h2>
                                <div class="flex flex-col sm:flex-row gap-2 mt-2 sm:mt-0">
                                    <button id="mark-all-read-btn" class="text-sm bg-blue-50 text-blue-600 hover:text-blue-800 hover:bg-blue-100 px-3 py-1.5 border border-blue-200 rounded-md transition flex items-center whitespace-nowrap">
                                        <i class="fas fa-check-double mr-1"></i>
                                        <span class="hidden sm:inline">Mark All as Read</span>
                                        <span class="sm:hidden">Mark All Read</span>
                                    </button>
                                    <select id="notification-filter" class="bg-white rounded px-3 py-1 text-sm border border-gray-300">
                                        <option value="all">All Notifications</option>
                                        <option value="meeting_room">Meeting Room Requests</option>
                                        <option value="equipment">Equipment Requests</option>
                                        <option value="book">Book Notifications</option>
                                        <option value="unread">Unread Notifications</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div id="notifications-list" class="space-y-3">
                            <!-- Notifications will be loaded here via JavaScript -->
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

        <!-- Book Details Modal -->
        <div id="book-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden opacity-0 transition-opacity duration-300">
            <div class="bg-white rounded-lg max-w-3xl w-full mx-4 p-6 shadow-xl">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="text-xl font-semibold text-blue-700">Book Details</h3>
                    <button id="close-book-modal" class="text-gray-500 hover:text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div id="book-details" class="space-y-3">
                    <!-- Book details will be loaded here via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Meeting Room Reservation Modal -->
        <div id="room-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden opacity-0 transition-opacity duration-300">
            <div class="bg-white rounded-lg max-w-lg w-full mx-4 max-h-[90vh] flex flex-col shadow-xl">
                <div class="flex justify-between items-start p-6 border-b">
                    <h3 class="text-xl font-semibold text-blue-700">Reserve Meeting Room</h3>
                    <button id="close-room-modal" class="text-gray-500 hover:text-gray-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                <div class="overflow-y-auto p-6 flex-1">
                    <form id="room-reservation-form" class="space-y-4">
                        <!-- Selected Date and Time (Read-only) -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
                                <div id="selected-date" class="p-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-700">
                                    Not selected
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Time</label>
                                <div id="selected-time" class="p-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-700">
                                    Not selected
                                </div>
                            </div>
                        </div>

                        <!-- Purpose -->
                        <div>
                            <label for="meeting-purpose" class="block text-sm font-medium text-gray-700 mb-1">Purpose <span class="text-red-500">*</span></label>
                            <select id="meeting-purpose" class="w-full p-2 border border-gray-300 rounded-lg" required>
                                <option value="">Select a purpose</option>
                                <option value="group-study">Group Study</option>
                                <option value="project-discussion">Project Discussion</option>
                                <option value="presentation-practice">Presentation Practice</option>
                                <option value="club-meeting">Club Meeting</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <!-- Number of Attendees -->
                        <div>
                            <label for="attendees-count" class="block text-sm font-medium text-gray-700 mb-1">Number of Attendees (5-10) <span class="text-red-500">*</span></label>
                            <select id="attendees-count" class="w-full p-2 border border-gray-300 rounded-lg" required>
                                <option value="">Select number of attendees</option>
                                <option value="5">5 Attendees</option>
                                <option value="6">6 Attendees</option>
                                <option value="7">7 Attendees</option>
                                <option value="8">8 Attendees</option>
                                <option value="9">9 Attendees</option>
                                <option value="10">10 Attendees</option>
                            </select>
                        </div>

                        <!-- Attendee Student IDs -->
                        <div id="attendee-container" class="hidden">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Attendee Student IDs <span class="text-red-500">*</span></label>
                            <div id="attendee-fields" class="space-y-2">
                                <!-- Student ID fields will be added dynamically -->
                            </div>
                        </div>

                        <!-- Additional Notes -->
                        <div>
                            <label for="meeting-notes" class="block text-sm font-medium text-gray-700 mb-1">Additional Notes</label>
                            <textarea id="meeting-notes" rows="3" class="w-full p-2 border border-gray-300 rounded-lg" placeholder="Any special requirements or information"></textarea>
                        </div>

                        <!-- Terms Agreement -->
                        <div class="flex items-start">
                            <input id="room-terms-agreement" type="checkbox" class="mt-1 mr-2" required>
                            <label for="room-terms-agreement" class="text-sm text-gray-600">
                                I agree to follow the library's meeting room policies and understand that I am responsible for the room during the reserved time.
                            </label>
                        </div>

                        <!-- Form Error Message -->
                        <div id="room-form-error" class="hidden p-3 bg-red-50 text-red-700 rounded-lg border border-red-200 text-sm">
                            Please fill in all required fields and accept the terms.
                        </div>
                    </form>
                </div>

                <!-- Submit Button (Fixed at bottom) -->
                <div class="p-4 border-t bg-gray-50">
                    <button type="button" id="confirm-room-reservation" class="w-full bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700 transition">
                        Confirm Reservation
                    </button>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div id="success-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden opacity-0 transition-opacity duration-300">
            <div class="bg-white rounded-lg max-w-md w-full mx-4 p-6 shadow-xl">
                <div class="text-center">
                    <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-100 text-green-500 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-900 mb-2" id="success-title">Success!</h3>
                    <p class="text-gray-600 mb-6" id="success-message">Your action was completed successfully.</p>
                    <div class="flex justify-center">
                        <button id="close-success-modal" class="bg-blue-600 text-white py-2 px-8 rounded-lg hover:bg-blue-700 transition">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Library Hours Modal -->
        <div id="library-hours-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden opacity-0 transition-opacity duration-300">
            <div class="bg-white rounded-lg max-w-lg w-full mx-4 max-h-[90vh] flex flex-col shadow-xl">
                <div class="flex justify-between items-start p-4 border-b">
                    <h3 class="text-xl font-semibold text-blue-700">Library Hours</h3>
                    <button id="close-library-hours-modal" class="text-gray-500 hover:text-gray-700" onclick="closeModal('library-hours-modal')">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                <div class="overflow-y-auto p-4 flex-1">
                    <div class="overflow-x-auto">
                        <table class="min-w-full border-collapse">
                            <thead class="sticky top-0">
                                <tr class="bg-blue-50">
                                    <th class="py-2 px-4 text-left text-xs font-medium text-blue-800 uppercase tracking-wider border border-gray-200">Day</th>
                                    <th class="py-2 px-4 text-left text-xs font-medium text-blue-800 uppercase tracking-wider border border-gray-200">San Bartolome</th>
                                    <th class="py-2 px-4 text-left text-xs font-medium text-blue-800 uppercase tracking-wider border border-gray-200">San Francisco</th>
                                    <th class="py-2 px-4 text-left text-xs font-medium text-blue-800 uppercase tracking-wider border border-gray-200">Batasan</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover:bg-gray-50">
                                    <td class="py-2 px-4 border border-gray-200 font-medium">Monday</td>
                                    <td class="py-2 px-4 border border-gray-200">7:00 AM - 8:00 PM</td>
                                    <td class="py-2 px-4 border border-gray-200">8:00 AM - 5:00 PM</td>
                                    <td class="py-2 px-4 border border-gray-200">8:00 AM - 5:00 PM</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="py-2 px-4 border border-gray-200 font-medium">Tuesday</td>
                                    <td class="py-2 px-4 border border-gray-200">7:00 AM - 8:00 PM</td>
                                    <td class="py-2 px-4 border border-gray-200">8:00 AM - 5:00 PM</td>
                                    <td class="py-2 px-4 border border-gray-200">8:00 AM - 5:00 PM</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="py-2 px-4 border border-gray-200 font-medium">Wednesday</td>
                                    <td class="py-2 px-4 border border-gray-200">7:00 AM - 8:00 PM</td>
                                    <td class="py-2 px-4 border border-gray-200">8:00 AM - 5:00 PM</td>
                                    <td class="py-2 px-4 border border-gray-200">8:00 AM - 5:00 PM</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="py-2 px-4 border border-gray-200 font-medium">Thursday</td>
                                    <td class="py-2 px-4 border border-gray-200">7:00 AM - 8:00 PM</td>
                                    <td class="py-2 px-4 border border-gray-200">8:00 AM - 5:00 PM</td>
                                    <td class="py-2 px-4 border border-gray-200">8:00 AM - 5:00 PM</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="py-2 px-4 border border-gray-200 font-medium">Friday</td>
                                    <td class="py-2 px-4 border border-gray-200">7:00 AM - 6:00 PM</td>
                                    <td class="py-2 px-4 border border-gray-200">8:00 AM - 5:00 PM</td>
                                    <td class="py-2 px-4 border border-gray-200">8:00 AM - 5:00 PM</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="py-2 px-4 border border-gray-200 font-medium">Saturday</td>
                                    <td class="py-2 px-4 border border-gray-200">8:00 AM - 8:00 PM</td>
                                    <td class="py-2 px-4 border border-gray-200">8:00 AM - 5:00 PM</td>
                                    <td class="py-2 px-4 border border-gray-200">8:00 AM - 5:00 PM</td>
                                </tr>
                                <tr class="bg-red-50">
                                    <td class="py-2 px-4 border border-gray-200 font-medium">Sunday</td>
                                    <td class="py-2 px-4 border border-gray-200 text-red-600">Closed</td>
                                    <td class="py-2 px-4 border border-gray-200 text-red-600">Closed</td>
                                    <td class="py-2 px-4 border border-gray-200 text-red-600">Closed</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="mt-4 p-3 bg-yellow-50 border border-yellow-100 rounded-lg">
                        <p class="text-sm text-yellow-800">
                            <i class="fas fa-info-circle mr-2"></i>
                            Note: Hours may change during holidays and exam periods. Please check the library website for the most up-to-date information.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Help Center Modal -->
        <div id="help-center-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden opacity-0 transition-opacity duration-300">
            <div class="bg-white rounded-lg max-w-lg w-full mx-4 max-h-[90vh] flex flex-col shadow-xl">
                <div class="flex justify-between items-start p-6 border-b">
                    <h3 class="text-xl font-semibold text-blue-700">Help Center</h3>
                    <button id="close-help-center-modal" class="text-gray-500 hover:text-gray-700" onclick="closeModal('help-center-modal')">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                <div class="overflow-y-auto p-6 flex-1">
                    <!-- FAQ Section -->
                    <div class="space-y-4">
                        <div class="p-4 border border-blue-100 rounded-lg">
                            <h4 class="font-medium text-blue-800 mb-2">How do I borrow a book?</h4>
                            <p class="text-sm text-gray-600">
                                To borrow a book, search for it in the catalog, note its location, find it on the shelf, and bring it to the circulation desk with your student ID.
                            </p>
                        </div>

                        <div class="p-4 border border-blue-100 rounded-lg">
                            <h4 class="font-medium text-blue-800 mb-2">How long can I keep borrowed items?</h4>
                            <p class="text-sm text-gray-600">
                                Regular books can be borrowed for 14 days, while reference materials and course reserves may have shorter loan periods.
                            </p>
                        </div>

                        <div class="p-4 border border-blue-100 rounded-lg">
                            <h4 class="font-medium text-blue-800 mb-2">How do I renew my books?</h4>
                            <p class="text-sm text-gray-600">
                                You can renew books through your online account, by phone, or in person at the circulation desk. Items can be renewed twice if no one else has requested them.
                            </p>
                        </div>

                        <div class="p-4 border border-blue-100 rounded-lg">
                            <h4 class="font-medium text-blue-800 mb-2">What are the late fees?</h4>
                            <p class="text-sm text-gray-600">
                                Late fees are â‚±10 per day for regular books and â‚±25 per day for reserve materials, with a maximum of â‚±500 per item.
                            </p>
                        </div>

                        <div class="p-4 border border-blue-100 rounded-lg">
                            <h4 class="font-medium text-blue-800 mb-2">How do I access e-books?</h4>
                            <p class="text-sm text-gray-600">
                                E-books can be accessed through the library portal using your student credentials. You can read them online or download them for offline access.
                            </p>
                        </div>
                    </div>

                    <!-- Contact Information -->
                    <div class="mt-6 pt-6 border-t border-gray-200">
                        <h4 class="font-medium text-blue-800 mb-3">Contact Information</h4>

                        <div class="space-y-3">
                            <div class="flex items-start">
                                <i class="fas fa-phone-alt mt-1 mr-3 text-blue-600"></i>
                                <div>
                                    <p class="font-medium">Phone</p>
                                    <p class="text-sm text-gray-600">+63 (2) 8123-4567</p>
                                </div>
                            </div>

                            <div class="flex items-start">
                                <i class="fas fa-envelope mt-1 mr-3 text-blue-600"></i>
                                <div>
                                    <p class="font-medium">Email</p>
                                    <p class="text-sm text-gray-600">library@ocu.edu.ph</p>
                                </div>
                            </div>

                            <div class="flex items-start">
                                <i class="fas fa-map-marker-alt mt-1 mr-3 text-blue-600"></i>
                                <div>
                                    <p class="font-medium">Locations</p>
                                    <p class="text-sm text-gray-600">San Bartolome, San Francisco, and Batasan Campuses</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- E-reader Modal is now created dynamically in JavaScript -->
    </div>

    <!-- Notification container -->
    <div id="notification-container" class="fixed top-4 right-4 z-50 flex flex-col gap-2"></div>

    <!-- JavaScript -->
    <script src="js/scripts.js" defer></script>
</body>
</html>
